<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>117 Games List</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <style>
        /* --- Neumorphic Styling --- */
        :root {
            --bg-color: #e0e0e0;
            --shadow-light: #ffffff;
            --shadow-dark: #bebebe;
            --text-color: #6c80ff;
            --fav-color: #e91e63;
            --danger-color: #ff4c4c;
        }

        body {
            background-color: var(--bg-color);
            padding: 20px;
            font-family: 'Inter', sans-serif;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container { width: 100%; max-width: 450px; }

        .box {
            padding: 30px 25px;
            border-radius: 25px;
            background: var(--bg-color);
            box-shadow: 10px 10px 20px var(--shadow-dark), -10px -10px 20px var(--shadow-light);
            /* Ensure the box handles overflow correctly */
            overflow: hidden; 
        }

        h1 { color: #6c80ff; text-align: center; font-size: 1.5em; margin-bottom: 25px; }

        /* Controls */
        .controls { display: flex; flex-direction: column; gap: 15px; margin-bottom: 25px; }
        
        #gsearchbar, #categoryFilter {
            width: 100%; 
            padding: 14px 15px; 
            border: none; 
            border-radius: 12px;
            background: var(--bg-color); 
            outline: none; 
            font-size: 16px; 
            color: #6c80ff;
            box-shadow: inset 5px 5px 10px var(--shadow-dark), inset -5px -5px 10px var(--shadow-light);
            /* --- THE FIX --- */
            box-sizing: border-box; 
        }

        /* --- Game List Styling --- */
        .section-header {
            color: var(--text-color); margin-top: 25px; margin-bottom: 15px;
            font-size: 1.2em; border-bottom: 1px solid #c8c8c8; font-weight: 700;
        }

        /* Wrapper generated by JS */
        .game-wrapper {
            position: relative; display: flex; align-items: center; margin: 12px 0;
            background: var(--bg-color); border-radius: 10px;
            box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
            transition: transform 0.2s ease;
            /* Ensure wrapper doesn't overflow */
            width: 100%;
            box-sizing: border-box;
        }
        
        .game-wrapper:hover { transform: translateY(-2px); }

        /* The Main Button */
        .game-button {
            flex-grow: 1; text-align: left; padding: 15px; border: none; background: transparent;
            font-size: 15px; color: var(--text-color); cursor: pointer; outline: none;
            /* Ensure text doesn't overflow */
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis;
            color:#6c80ff;
        }

        /* Action Buttons (Heart / X) */
        .actions {
            display: flex; gap: 8px; padding-right: 10px; flex-shrink: 0;
        }

        .icon-btn {
            width: 30px; height: 30px; border-radius: 50%; border: none;
            background: var(--bg-color); display: flex; align-items: center; justify-content: center;
            cursor: pointer; color: #1f83c2; font-size: 14px;
            box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
            transition: all 0.2s;
        }

        .icon-btn:hover { color: var(--text-color); transform: scale(1.1); }
        .icon-btn:active { box-shadow: inset 2px 2px 4px var(--shadow-dark), inset -2px -2px 4px var(--shadow-light); }

        .icon-btn.is-favorite { color: var(--fav-color); box-shadow: inset 2px 2px 4px var(--shadow-dark), inset -2px -2px 4px var(--shadow-light); }
        
        .remove-btn { color: var(--danger-color); display: none; }
        .showing-recent .remove-btn { display: flex; }

        /* Status Message */
        #status-message {
            display: none; margin-top: 30px; text-align: center; padding: 15px;
            color: var(--text-color); font-weight: bold; border-radius: 10px;
            box-sizing: border-box; width: 100%;
        }
        
        #status-message.is-link {
            color: #ff5722; cursor: pointer;
            box-shadow: 3px 3px 6px var(--shadow-dark), -3px -3px 6px var(--shadow-light);
        }
        #status-message.is-link:active {
            box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
        }

        @media (max-width: 600px) { body { padding: 10px; } }
    </style>
</head>
<body>

<div class="container">
    <div class="box">
        <h1>Games Collection</h1>
        
        <div class="controls">
            <select id="categoryFilter">
                <option value="all">All Games</option>
                <option value="favorites">‚ù§Ô∏è Favorites</option>
                <option value="recent">üïí Recent Plays</option>
            </select>
            <input type="text" id="gsearchbar" placeholder="Search..." autocomplete="off">
        </div>

        <div id="glist">
            <h2 data-section-name="HTML5 Games" class="section-header">HTML5 Games</h2>
            <button class="game-button" data-game-title="10-minutes-till-dawn" data-game-type="html5" onclick="window.location.href='/games/10-minutes-till-dawn/'">10 Minutes Till Dawn</button>
            <button class="game-button" data-game-title="1v1-lol" data-game-type="html5" onclick="window.location.href='/games/1v1-lol/'">1v1.LOL</button>
            <button class="game-button" data-game-title="2048" data-game-type="html5" onclick="window.location.href='/games/2048/'">2048</button>
            <button class="game-button" data-game-title="a-dark-room" data-game-type="html5" onclick="window.location.href='/games/a-dark-room/'">A Dark Room</button>
            <button class="game-button" data-game-title="abandoned" data-game-type="html5" onclick="window.location.href='/games/abandoned/'">Abandoned</button>
            <button class="game-button" data-game-title="abandoned-2" data-game-type="html5" onclick="window.location.href='/games/abandoned-2/'">Abandoned 2</button>
            <button class="game-button" data-game-title="ages-of-conflict" data-game-type="html5" onclick="window.location.href='/games/ages-of-conflict/'">Ages of Conflict</button>
            <button class="game-button" data-game-title="aground" data-game-type="html5" onclick="window.location.href='/games/aground/'">Aground</button>
            <button class="game-button" data-game-title="amidst-the-sky" data-game-type="html5" onclick="window.location.href='/games/amidst-the-sky/'">Amidst The Sky</button>
            <button class="game-button" data-game-title="eaglercraft-minecraft-ampler-launcher" data-game-type="html5" onclick="window.location.href='/games/ampler-launcher/'">Eaglercraft Ampler Launcher (Minecraft)</button>
            <button class="game-button" data-game-title="another-gentlemans-adventure" data-game-type="html5" onclick="window.location.href='/games/another-gentlemans-adventure/'">Another Gentlemans Adventure</button>
            <button class="game-button" data-game-title="awesome-tanks" data-game-type="html5" onclick="window.location.href='/games/awesome-tanks/'">Awesome Tanks</button>
            <button class="game-button" data-game-title="awesome-tanks-2" data-game-type="html5" onclick="window.location.href='/games/awesome-tanks-2/'">Awesome Tanks 2</button>
            <button class="game-button" data-game-title="babel-tower" data-game-type="html5" onclick="window.location.href='/games/babel-tower/'">Babel Tower</button>
            <button class="game-button" data-game-title="basket-random" data-game-type="html5" onclick="window.location.href='/games/basket-random/'">Basket Random</button>
            <button class="game-button" data-game-title="basketball-stars" data-game-type="html5" onclick="window.location.href='/games/basketball-stars/'">Basketball Stars</button>
            <button class="game-button" data-game-title="bit-life" data-game-type="html5" onclick="window.location.href='/games/bit-life/'">Bit Life</button>
            <button class="game-button" data-game-title="boxing-random" data-game-type="html5" onclick="window.location.href='/games/boxing-random/'">Boxing Random</button>
            <button class="game-button" data-game-title="brawl-stars-project-laser" data-game-type="html5" onclick="window.location.href='/games/brawl-stars-project-laser/'">Brawl Stars Project Laser</button>
            <button class="game-button" data-game-title="breaklock" data-game-type="html5" onclick="window.location.href='/games/breaklock/'">Breaklock</button>
            <button class="game-button" data-game-title="chrome-dino" data-game-type="html5" onclick="window.location.href='/games/chrome-dino/'">Chrome Dino</button>
            <button class="game-button" data-game-title="clicker-heroes" data-game-type="html5" onclick="window.location.href='/games/clicker-heroes/'">Clicker Heroes</button>
            <button class="game-button" data-game-title="clicker-heroes-updated" data-game-type="html5" onclick="window.location.href='/games/clicker-heroes-updated/'">Clicker Heroes Updated</button>
            <button class="game-button" data-game-title="conways-game-of-life" data-game-type="html5" onclick="window.location.href='/games/conways-game-of-life/'">Conway's Game of Life</button>
            <button class="game-button" data-game-title="cookie-clicker" data-game-type="html5" onclick="window.location.href='/games/cookie-clicker/'">Cookie Clicker</button>
            <button class="game-button" data-game-title="core-ball" data-game-type="html5" onclick="window.location.href='/games/core-ball/'">Core Ball</button>
            <button class="game-button" data-game-title="crossy-road" data-game-type="html5" onclick="window.location.href='/games/crossy-road/'">Crossy Road</button>
            <button class="game-button" data-game-title="cut-the-rope" data-game-type="html5" onclick="window.location.href='/games/cut-the-rope/'">Cut The Rope</button>
            <button class="game-button" data-game-title="dadish" data-game-type="html5" onclick="window.location.href='/games/dadish/'">Dadish</button>
            <button class="game-button" data-game-title="dadish-2" data-game-type="html5" onclick="window.location.href='/games/dadish-2/'">Dadish 2</button>
            <button class="game-button" data-game-title="dadish-3" data-game-type="html5" onclick="window.location.href='/games/dadish-3/'">Dadish 3</button>
            <button class="game-button" data-game-title="doge-miner" data-game-type="html5" onclick="window.location.href='/games/doge-miner/'">Doge Miner</button>
            <button class="game-button" data-game-title="doodle-jump" data-game-type="html5" onclick="window.location.href='/games/doodle-jump/'">Doodle Jump</button>
            <button class="game-button" data-game-title="drift-boss" data-game-type="html5" onclick="window.location.href='/games/drift-boss/'">Drift Boss</button>
            <button class="game-button" data-game-title="drift-hunters" data-game-type="html5" onclick="window.location.href='/games/drift-hunters/'">Drift Hunters</button>
            <button class="game-button" data-game-title="drive-mad" data-game-type="html5" onclick="window.location.href='/games/drive-mad/'">Drive Mad</button>
            <button class="game-button" data-game-title="drive-mad-s" data-game-type="html5" onclick="window.location.href='/games/drive-mad-s/'">Drive Mad S</button>
            <button class="game-button" data-game-title="duck-life-4" data-game-type="html5" onclick="window.location.href='/games/duck-life-4/'">Duck Life 4</button>
            <button class="game-button" data-game-title="dune" data-game-type="html5" onclick="window.location.href='/games/dune/'">Dune!</button>
            <button class="game-button" data-game-title="eggy-car" data-game-type="html5" onclick="window.location.href='/games/eggy-car/'">Eggy Car</button>
            <button class="game-button" data-game-title="evowars" data-game-type="html5" onclick="window.location.href='/games/evowars/'">EvoWars</button>
            <button class="game-button" data-game-title="family-feud" data-game-type="html5" onclick="window.location.href='/games/family-feud/'">Family Feud</button>
            <button class="game-button" data-game-title="fireboy-and-watergirl" data-game-type="html5" onclick="window.location.href='/games/fireboy-and-watergirl/'">Fireboy and Watergirl in the Forest Temple</button>
            <button class="game-button" data-game-title="fireboy-and-watergirl-2" data-game-type="html5" onclick="window.location.href='/games/fireboy-and-watergirl-2/'">Fireboy and Watergirl in the Light Temple</button>
            <button class="game-button" data-game-title="fireboy-and-watergirl-3" data-game-type="html5" onclick="window.location.href='/games/fireboy-and-watergirl-3/'">Fireboy and Watergirl in the Ice Temple</button>
            <button class="game-button" data-game-title="fireboy-and-watergirl-4" data-game-type="html5" onclick="window.location.href='/games/fireboy-and-watergirl-4/'">Fireboy and Watergirl in the Crystal Temple</button>
            <button class="game-button" data-game-title="flappy-bird" data-game-type="html5" onclick="window.location.href='/games/flappy-bird/'">Flappy Bird</button>
            <button class="game-button" data-game-title="friday-night-funkin" data-game-type="html5" onclick="window.location.href='/games/friday-night-funkin/'">Friday Night Funkin</button>
            <button class="game-button" data-game-title="geometry-dash-lite" data-game-type="html5" onclick="window.location.href='/games/geometry-dash-lite/'">Geometry Dash Lite</button>
            <button class="game-button" data-game-title="geometry-dash-remastered" data-game-type="html5" onclick="window.location.href='/games/geometry-dash-remastered/'">Geometry Dash Remastered</button>
            <button class="game-button" data-game-title="geometry-vibes" data-game-type="html5" onclick="window.location.href='/games/geometry-vibes/'">Geometry Vibes</button>
            <button class="game-button" data-game-title="geometry-vibes-monster" data-game-type="html5" onclick="window.location.href='/games/geometry-vibes-monster/'">Geometry Vibes Monster</button>
            <button class="game-button" data-game-title="geometry-vibes-x-ball" data-game-type="html5" onclick="window.location.href='/games/geometry-vibes-x-ball/'">Geometry Vibes X-Ball</button>
            <button class="game-button" data-game-title="getaway-shootout" data-game-type="html5" onclick="window.location.href='/games/getaway-shootout/'">Getaway Shootout</button>
            <button class="game-button" data-game-title="gons-io" data-game-type="html5" onclick="window.location.href='/games/gons-io/'">Gons io</button>
            <button class="game-button" data-game-title="gunspin" data-game-type="html5" onclick="window.location.href='/games/gunspin/'">Gun Spin</button>
            <button class="game-button" data-game-title="hextris" data-game-type="html5" onclick="window.location.href='/games/hextris/'">Hextris</button>
            <button class="game-button" data-game-title="idle-breakout" data-game-type="html5" onclick="window.location.href='/games/idle-breakout/'">Idle Breakout</button>
            <button class="game-button" data-game-title="incremancer" data-game-type="html5" onclick="window.location.href='/games/incremancer/'">Incremancer</button>
            <button class="game-button" data-game-title="lion-soldiers-vengeance" data-game-type="html5" onclick="window.location.href='/games/lion-soldiers-vengeance/'">Lion Solider's Vengeance</button>
            <button class="game-button" data-game-title="maptroid" data-game-type="html5" onclick="window.location.href='/games/maptroid/'">Maptroid</button>
            <button class="game-button" data-game-title="mario-game" data-game-type="html5" onclick="window.location.href='/games/mario-game/'">Mario</button>
            <button class="game-button" data-game-title="monkey-mart" data-game-type="html5" onclick="window.location.href='/games/monkey-mart/'">Monkey Mart</button>
            <button class="game-button" data-game-title="motox3m" data-game-type="html5" onclick="window.location.href='/games/motox3m/'">MotoX3M</button>
            <button class="game-button" data-game-title="n-gon" data-game-type="html5" onclick="window.location.href='/games/n-gon/'">N-gon</button>
            <button class="game-button" data-game-title="n-step-steve-part-1" data-game-type="html5" onclick="window.location.href='/games/n-step-steve-part-1/'">N Step Steve Part 1</button>
            <button class="game-button" data-game-title="n-step-steve-part-2" data-game-type="html5" onclick="window.location.href='/games/n-step-steve-part-2/'">N Step Steve Part 2</button>
            <button class="game-button" data-game-title="ovo" data-game-type="html5" onclick="window.location.href='/games/ovo/1.4.4/'">OvO</button>
            <button class="game-button" data-game-title="ovo-2" data-game-type="html5" onclick="window.location.href='/games/ovo/2.0.2alpha/'">OvO 2</button>
            <button class="game-button" data-game-title="particle-clicker" data-game-type="html5" onclick="window.location.href='/games/particle-clicker/'">Particle Clicker</button>
            <button class="game-button" data-game-title="pcraft" data-game-type="html5" onclick="window.location.href='/games/pcraft/'">P.craft</button>
            <button class="game-button" data-game-title="planet-life" data-game-type="html5" onclick="window.location.href='/games/planet-life/'">Planet Life</button>
            <button class="game-button" data-game-title="progress-knight-quest" data-game-type="html5" onclick="window.location.href='/games/progress-knight-quest/'">Progress Knight Quest</button>
            <button class="game-button" data-game-title="progress-knight-reborn" data-game-type="html5" onclick="window.location.href='/games/progress-knight-reborn/'">Progress Knight Reborn</button>
            <button class="game-button" data-game-title="pull-of-war" data-game-type="html5" onclick="window.location.href='/games/pull-of-war/'">Pull Of War</button>
            <button class="game-button" data-game-title="reach-the-core" data-game-type="html5" onclick="window.location.href='/games/reach-the-core/'">Reach The Core</button>
            <button class="game-button" data-game-title="restless-wing-syndrome" data-game-type="html5" onclick="window.location.href='/games/restless-wing-syndrome/'">Restless Wing Syndrome</button>
            <button class="game-button" data-game-title="retro-bowl" data-game-type="html5" onclick="window.location.href='/games/retro-bowl/'">Retro Bowl</button>
            <button class="game-button" data-game-title="retro-bowl-old" data-game-type="html5" onclick="window.location.href='/games/retro-bowl-old/'">Retro Bowl Old</button>
            <button class="game-button" data-game-title="rift-shift" data-game-type="html5" onclick="window.location.href='/games/rift-shift/'">Rift Shift</button>
            <button class="game-button" data-game-title="rocket-league-2d" data-game-type="html5" onclick="window.location.href='/games/rocket-league-2d/'">Rocket League 2D</button>
            <button class="game-button" data-game-title="rooftop-snipers" data-game-type="html5" onclick="window.location.href='/games/rooftop-snipers/'">Rooftop Snipers</button>
            <button class="game-button" data-game-title="rookie-bowman" data-game-type="html5" onclick="window.location.href='/games/rookie-bowman/'">Rookie Bowman</button>
            <button class="game-button" data-game-title="run-3" data-game-type="html5" onclick="window.location.href='/games/run-3/'">Run 3</button>
            <button class="game-button" data-game-title="run-3-beta" data-game-type="html5" onclick="window.location.href='/games/run-3-beta/'">Run 3 Beta (may not work)</button>
            <button class="game-button" data-game-title="sabercut" data-game-type="html5" onclick="window.location.href='/games/sabercut/'">Sabercut</button>
            <button class="game-button" data-game-title="sandspiel" data-game-type="html5" onclick="window.location.href='/games/sandspiel/'">Sandspiel</button>
            <button class="game-button" data-game-title="scuba-bear" data-game-type="html5" onclick="window.location.href='/games/scuba-bear/'">Scuba Bear</button>
            <button class="game-button" data-game-title="shadow-fight" data-game-type="html5" onclick="window.location.href='/games/shadow-fight/'">Shadow Fight</button>
            <button class="game-button" data-game-title="slice-master" data-game-type="html5" onclick="window.location.href='/games/slice-master/'">Slice Master</button>
            <button class="game-button" data-game-title="slope" data-game-type="html5" onclick="window.location.href='/games/slope/'">Slope</button>
            <button class="game-button" data-game-title="smash-karts" data-game-type="html5" onclick="window.location.href='/games/smash-karts/'">Smash Karts</button>
            <button class="game-button" data-game-title="smart-ball" data-game-type="html5" onclick="window.location.href='/games/smart-ball/'">Smart Ball</button>
            <button class="game-button" data-game-title="soccer-random" data-game-type="html5" onclick="window.location.href='/games/soccer-random/'">Soccer Random</button>
            <button class="game-button" data-game-title="station-saturn" data-game-type="html5" onclick="window.location.href='/games/station-saturn/'">Station Saturn</button>
            <button class="game-button" data-game-title="stickman-hook" data-game-type="html5" onclick="window.location.href='/games/stickman-hook/'">Stickman Hook</button>
            <button class="game-button" data-game-title="subway-surfers" data-game-type="html5" onclick="window.location.href='/games/subway-surfers/'">Subway Surfers</button>
            <button class="game-button" data-game-title="subway-surfers-ny" data-game-type="html5" onclick="window.location.href='/games/subway-surfers-ny/'">Subway Surfers New York</button>
            <button class="game-button" data-game-title="tanuki-sunset" data-game-type="html5" onclick="window.location.href='/games/tanuki-sunset/'">Tanuki Sunset</button>
            <button class="game-button" data-game-title="temple-run-2" data-game-type="html5" onclick="window.location.href='/games/temple-run-2/'">Temple Run 2</button>
            <button class="game-button" data-game-title="the-final-earth" data-game-type="html5" onclick="window.location.href='/games/the-final-earth/'">The Final Earth</button>
            <button class="game-button" data-game-title="the-treasure" data-game-type="html5" onclick="window.location.href='/games/the-treasure/'">The Treasure</button>
            <button class="game-button" data-game-title="there-is-no-game" data-game-type="html5" onclick="window.location.href='/games/there-is-no-game/'">There Is No Game</button>
            <button class="game-button" data-game-title="tic-tac-what" data-game-type="html5" onclick="window.location.href='/games/tic-tac-what/'">Tic Tac What?</button>
            <button class="game-button" data-game-title="time-shooter" data-game-type="html5" onclick="window.location.href='/games/time-shooter/'">Time Shooter</button>
            <button class="game-button" data-game-title="time-shooter-3" data-game-type="html5" onclick="window.location.href='/games/time-shooter-3/'">Time Shooter 3</button>
            <button class="game-button" data-game-title="tiny-fishing" data-game-type="html5" onclick="window.location.href='/games/tiny-fishing/'">Tiny Fishing</button>
            <button class="game-button" data-game-title="trace" data-game-type="html5" onclick="window.location.href='/games/trace/'">Trace</button>
            <button class="game-button" data-game-title="tunnel-rush" data-game-type="html5" onclick="window.location.href='/games/tunnel-rush/'">Tunnel Rush</button>
            <button class="game-button" data-game-title="two-ball-3d" data-game-type="html5" onclick="window.location.href='/games/two-ball-3d/'">Two Ball 3d</button>
            <button class="game-button" data-game-title="vex-3" data-game-type="html5" onclick="window.location.href='/games/vex-3/'">Vex 3</button>
            <button class="game-button" data-game-title="vex-4" data-game-type="html5" onclick="window.location.href='/games/vex-4/'">Vex 4</button>
            <button class="game-button" data-game-title="vex-5" data-game-type="html5" onclick="window.location.href='/games/vex-5/'">Vex 5</button>
            <button class="game-button" data-game-title="vex-6" data-game-type="html5" onclick="window.location.href='/games/vex-6/'">Vex 6</button>
            <button class="game-button" data-game-title="vex-7" data-game-type="html5" onclick="window.location.href='/games/vex-7/'">Vex 7</button>
            <button class="game-button" data-game-title="volley-random" data-game-type="html5" onclick="window.location.href='/games/volley-random/'">Volley Random</button>
            <button class="game-button" data-game-title="web-osu" data-game-type="html5" onclick="window.location.href='/games/web-osu/'">Web OSU</button>
            <button class="game-button" data-game-title="where-is-the-water" data-game-type="html5" onclick="window.location.href='/games/where-is-the-water/'">Where is the Water?</button>
            <button class="game-button" data-game-title="x-trench-run" data-game-type="html5" onclick="window.location.href='/games/x-trench-run/'">X Trench Run</button>
            <button class="game-button" data-game-title="yohoho" data-game-type="html5" onclick="window.location.href='/games/yohoho/'">Yohoho</button>
            </div>

            <h2 data-section-name="Flash" class="section-header">Flash Games</h2>
            <button class="game-button" data-game-title="achievement-unlocked" data-game-type="flash" onclick="window.location.href='/games/flash/?game=achievement-unlocked'">Achievement Unlocked</button>
            <button class="game-button" data-game-title="achievement-unlocked-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=achievement-unlocked-2'">Achievement Unlocked 2</button>
            <button class="game-button" data-game-title="achievement-unlocked-3" data-game-type="flash" onclick="window.location.href='/games/flash/?game=achievement-unlocked-3'">Achievement Unlocked 3</button>
            <button class="game-button" data-game-title="age-of-war" data-game-type="flash" onclick="window.location.href='/games/flash/?game=age-of-war'">Age of War</button>
            <button class="game-button" data-game-title="age-of-war-hacked" data-game-type="flash" onclick="window.location.href='/games/flash/?game=age-of-war-hacked'">Age of War Hacked</button>
            <button class="game-button" data-game-title="bloons" data-game-type="flash" onclick="window.location.href='/games/flash/?game=bloons'">Bloons</button>
            <button class="game-button" data-game-title="bloons-td-1" data-game-type="flash" onclick="window.location.href='/games/flash/?game=bloons-td-1'">Bloons TD 1</button>
            <button class="game-button" data-game-title="bloons-td-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=bloons-td-2'">Bloons TD 2</button>
            <button class="game-button" data-game-title="bloons-td-3" data-game-type="flash" onclick="window.location.href='/games/flash/?game=bloons-td-3'">Bloons TD 3</button>
            <button class="game-button" data-game-title="bloons-td-4" data-game-type="flash" onclick="window.location.href='/games/flash/?game=bloons-td-4'">Bloons TD 4</button>
            <button class="game-button" data-game-title="bloons-td-5" data-game-type="flash" onclick="window.location.href='/games/flash/?game=bloons-td-5'">Bloons TD 5</button>
            <button class="game-button" data-game-title="bloxorz" data-game-type="flash" onclick="window.location.href='/games/flash/?game=bloxorz'">Bloxorz</button>
            <button class="game-button" data-game-title="henry-stickmin-0-breaking-the-bank" data-game-type="flash" onclick="window.location.href='/games/flash/?game=breaking-the-bank'">Breaking The Bank (Henry Stickmin 0)</button>
            <button class="game-button" data-game-title="cat-ninja" data-game-type="flash" onclick="window.location.href='/games/flash/?game=cat-ninja'">Cat Ninja</button>
            <button class="game-button" data-game-title="creative-kill-chamber" data-game-type="flash" onclick="window.location.href='/games/flash/?game=creative-kill-chamber'">Creative Kill Chamber</button>
            <button class="game-button" data-game-title="curveball" data-game-type="flash" onclick="window.location.href='/games/flash/?game=curveball'">Curveball</button>
            <button class="game-button" data-game-title="dont-escape" data-game-type="flash" onclick="window.location.href='/games/flash/?game=dont-escape'">Don't Escape</button>
            <button class="game-button" data-game-title="dont-escape-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=dont-escape-2'">Don't Escape 2</button>
            <button class="game-button" data-game-title="dont-escape-3" data-game-type="flash" onclick="window.location.href='/games/flash/?game=dont-escape-3'">Don't Escape 3</button>
            <button class="game-button" data-game-title="duck-life" data-game-type="flash" onclick="window.location.href='/games/flash/?game=duck-life'">Duck Life</button>
            <button class="game-button" data-game-title="duck-life-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=duck-life-2'">Duck Life 2</button>
            <button class="game-button" data-game-title="duck-life-3" data-game-type="flash" onclick="window.location.href='/games/flash/?game=duck-life-3'">Duck Life 3</button>
            <button class="game-button" data-game-title="duck-life-treasure-hunt" data-game-type="flash" onclick="window.location.href='/games/flash/?game=duck-life-treasure-hunt'">Duck Life Treasure Hunt</button>
            <button class="game-button" data-game-title="escape-the-bathroom" data-game-type="flash" onclick="window.location.href='/games/flash/?game=escape-the-bathroom'">Escape The Bathroom</button>
            <button class="game-button" data-game-title="escape-the-car" data-game-type="flash" onclick="window.location.href='/games/flash/?game=escape-the-car'">Escape The Car</button>
            <button class="game-button" data-game-title="escape-the-closet" data-game-type="flash" onclick="window.location.href='/games/flash/?game=escape-the-closet'">Escape The Closet</button>
            <button class="game-button" data-game-title="escape-the-freezer" data-game-type="flash" onclick="window.location.href='/games/flash/?game=escape-the-freezer'">Escape The Freezer</button>
            <button class="game-button" data-game-title="escape-the-phonebooth" data-game-type="flash" onclick="window.location.href='/games/flash/?game=escape-the-phonebooth'">Escape The Phonebooth</button>
            <button class="game-button" data-game-title="escape-the-shack" data-game-type="flash" onclick="window.location.href='/games/flash/?game=escape-the-shack'">Escape The Shack</button>
            <button class="game-button" data-game-title="henry-stickmin-1-escaping-the-prison" data-game-type="flash" onclick="window.location.href='/games/flash/?game=escaping-the-prison'">Escaping The Prison (Henry Stickmin 1)</button>
            <button class="game-button" data-game-title="factory-balls" data-game-type="flash" onclick="window.location.href='/games/flash/?game=factory-balls'">Factory Balls</button>
            <button class="game-button" data-game-title="henry-stickmin-4-fleeing-the-complex" data-game-type="flash" onclick="window.location.href='/games/flash/?game=fleeing-the-complex'">Fleeing the Complex (Henry Stickmin 4)</button>
            <button class="game-button" data-game-title="flash-chess" data-game-type="flash" onclick="window.location.href='/games/flash/?game=flash-chess'">Flash Chess</button>
            <button class="game-button" data-game-title="gun-mayhem" data-game-type="flash" onclick="window.location.href='/games/flash/?game=gun-mayhem'">Gun Mayhem</button>
            <button class="game-button" data-game-title="gun-mayhem-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=gun-mayhem-2'">Gun Mayhem 2</button>
            <button class="game-button" data-game-title="henry-stickmin-3-infiltrating-the-airship" data-game-type="flash" onclick="window.location.href='/games/flash/?game=infiltrating-the-airship'">Infiltrating The Airship (Henry Stickmin 3)</button>
            <button class="game-button" data-game-title="learn-to-fly" data-game-type="flash" onclick="window.location.href='/games/flash/?game=learn-to-fly'">Learn To Fly</button>
            <button class="game-button" data-game-title="learn-to-fly-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=learn-to-fly-2'">Learn To Fly 2</button>
            <button class="game-button" data-game-title="learn-to-fly-3" data-game-type="flash" onclick="window.location.href='/games/flash/?game=learn-to-fly-3'">Learn To Fly 3</button>
            <button class="game-button" data-game-title="learn-to-fly-idle" data-game-type="flash" onclick="window.location.href='/games/flash/?game=learn-to-fly-idle'">Learn To Fly Idle</button>
            <button class="game-button" data-game-title="papas-freezeria" data-game-type="flash" onclick="window.location.href='/games/flash/?game=papas-freezeria'">Papas Freezeria</button>
            <button class="game-button" data-game-title="papas-pizzaria" data-game-type="flash" onclick="window.location.href='/games/flash/?game=papas-pizzaria'">Papas Pizzeria</button>
            <button class="game-button" data-game-title="raft-wars" data-game-type="flash" onclick="window.location.href='/games/flash/?game=raft-wars'">Raft Wars</button>
            <button class="game-button" data-game-title="raft-wars-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=raft-wars-2'">Raft Wars 2</button>
            <button class="game-button" data-game-title="riddle-school" data-game-type="flash" onclick="window.location.href='/games/flash/?game=riddle-school'">Riddle School</button>
            <button class="game-button" data-game-title="riddle-school-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=riddle-school-2'">Riddle School 2</button>
            <button class="game-button" data-game-title="riddle-school-3" data-game-type="flash" onclick="window.location.href='/games/flash/?game=riddle-school-3'">Riddle School 3</button>
            <button class="game-button" data-game-title="riddle-school-4" data-game-type="flash" onclick="window.location.href='/games/flash/?game=riddle-school-4'">Riddle School 4</button>
            <button class="game-button" data-game-title="riddle-school-5" data-game-type="flash" onclick="window.location.href='/games/flash/?game=riddle-school-5'">Riddle School 5</button>
            <button class="game-button" data-game-title="riddle-transfer" data-game-type="flash" onclick="window.location.href='/games/flash/?game=riddle-transfer'">Riddle Transfer</button>
            <button class="game-button" data-game-title="riddle-transfer-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=riddle-transfer-2'">Riddle Transfer 2</button>
            <button class="game-button" data-game-title="rogue-soul" data-game-type="flash" onclick="window.location.href='/games/flash/?game=rogue-soul'">Rogue Soul</button>
            <button class="game-button" data-game-title="rogue-soul-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=rogue-soul-2'">Rogue Soul 2</button>
            <button class="game-button" data-game-title="henry-stickmin-2-stealing-the-diamond" data-game-type="flash" onclick="window.location.href='/games/flash/?game=stealing-the-diamond'">Stealing The Diamond (Henry Stickmin 2)</button>
            <button class="game-button" data-game-title="stick-rpg-complete" data-game-type="flash" onclick="window.location.href='/games/flash/?game=stick-rpg-complete'">Stick RPG Complete</button>
            <button class="game-button" data-game-title="stick-war" data-game-type="flash" onclick="window.location.href='/games/flash/?game=stick-war'">Stick War</button>
            <button class="game-button" data-game-title="submachine" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine'">Submachine</button>
            <button class="game-button" data-game-title="submachine-0" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-0'">Submachine 0</button>
            <button class="game-button" data-game-title="submachine-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-2'">Submachine 2</button>
            <button class="game-button" data-game-title="submachine-3" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-3'">Submachine 3</button>
            <button class="game-button" data-game-title="submachine-4" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-4'">Submachine 4</button>
            <button class="game-button" data-game-title="submachine-5" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-5'">Submachine 5</button>
            <button class="game-button" data-game-title="submachine-6" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-6'">Submachine 6</button>
            <button class="game-button" data-game-title="submachine-7" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-7'">Submachine 7</button>
            <button class="game-button" data-game-title="submachine-8" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-8'">Submachine 8</button>
            <button class="game-button" data-game-title="submachine-9" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-9'">Submachine 9</button>
            <button class="game-button" data-game-title="submachine-10" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-10'">Submachine 10</button>
            <button class="game-button" data-game-title="submachine-32-chambers" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-32-chambers'">Submachine 32 Chambers</button>
            <button class="game-button" data-game-title="submachine-flf" data-game-type="flash" onclick="window.location.href='/games/flash/?game=submachine-flf'">Submachine FLF</button>
            <button class="game-button" data-game-title="sugar-sugar" data-game-type="flash" onclick="window.location.href='/games/flash/?game=sugar-sugar'">Sugar Sugar</button>
            <button class="game-button" data-game-title="swords-and-souls" data-game-type="flash" onclick="window.location.href='/games/flash/?game=swords-and-souls'">Swords and Souls</button>
            <button class="game-button" data-game-title="the-impossible-quiz" data-game-type="flash" onclick="window.location.href='/games/flash/?game=the-impossible-quiz'">The Impossible Quiz</button>
            <button class="game-button" data-game-title="this-is-the-only-level" data-game-type="flash" onclick="window.location.href='/games/flash/?game=this-is-the-only-level'">This Is The Only Level</button>
            <button class="game-button" data-game-title="this-is-the-only-level-2" data-game-type="flash" onclick="window.location.href='/games/flash/?game=this-is-the-only-level-2'">This Is The Only Level 2</button>
            <button class="game-button" data-game-title="ultimate-chess" data-game-type="flash" onclick="window.location.href='/games/flash/?game=ultimate-chess'">Ultimate Chess</button>
</div>

        <div id="status-message"></div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const glist = document.getElementById('glist');
        const searchBar = document.getElementById('gsearchbar');
        const categoryFilter = document.getElementById('categoryFilter');
        const statusMsg = document.getElementById('status-message');
        
        let favorites = JSON.parse(localStorage.getItem('favGames')) || [];
        let recents = JSON.parse(localStorage.getItem('recentGames')) || [];

        // --- 1. AUTOMATICALLY UPGRADE BUTTONS ---
        const originalButtons = document.querySelectorAll('.game-button');
        
        originalButtons.forEach(btn => {
            const title = btn.getAttribute('data-game-title');
            const type = btn.getAttribute('data-game-type');
            
            // Extract URL
            const onclickStr = btn.getAttribute('onclick');
            let url = "#";
            if (onclickStr && onclickStr.includes("'")) {
                url = onclickStr.split("'")[1]; 
            }

            btn.removeAttribute('onclick');

            // Create Wrapper
            const wrapper = document.createElement('div');
            wrapper.className = 'game-wrapper';
            wrapper.dataset.gameTitle = title;
            wrapper.dataset.gameType = type;

            // Create Actions
            const actions = document.createElement('div');
            actions.className = 'actions';

            const heartBtn = document.createElement('button');
            heartBtn.className = `icon-btn ${favorites.includes(title) ? 'is-favorite' : ''}`;
            heartBtn.innerHTML = '<i class="fa-solid fa-heart"></i>';
            heartBtn.onclick = (e) => { e.stopPropagation(); toggleFavorite(title, heartBtn); };

            const removeBtn = document.createElement('button');
            removeBtn.className = 'icon-btn remove-btn';
            removeBtn.innerHTML = '<i class="fa-solid fa-xmark"></i>';
            removeBtn.onclick = (e) => { e.stopPropagation(); removeRecent(title); };

            actions.append(heartBtn, removeBtn);
            
            // Swap in the wrapper
            btn.parentNode.insertBefore(wrapper, btn);
            wrapper.appendChild(btn);
            wrapper.appendChild(actions);

            // New Click Logic
            btn.onclick = () => {
                addToRecent(title);
                window.location.href = url;
            };
        });

        // --- THE FIX: Capture the Master Order (Headers + Games) ---
        // This ensures we know exactly how the list looked before we started shuffling things
        const originalOrder = Array.from(glist.children);
        const wrappers = Array.from(document.querySelectorAll('.game-wrapper'));

        // --- 2. LOGIC FUNCTIONS ---

        function toggleFavorite(title, btn) {
            if (favorites.includes(title)) {
                favorites = favorites.filter(t => t !== title);
                btn.classList.remove('is-favorite');
            } else {
                favorites.push(title);
                btn.classList.add('is-favorite');
            }
            localStorage.setItem('favGames', JSON.stringify(favorites));
            if (categoryFilter.value === 'favorites') filterGames();
        }

        function addToRecent(title) {
            recents = recents.filter(t => t !== title);
            recents.unshift(title);
            if (recents.length > 20) recents.pop();
            localStorage.setItem('recentGames', JSON.stringify(recents));
        }

        function removeRecent(title) {
            recents = recents.filter(t => t !== title);
            localStorage.setItem('recentGames', JSON.stringify(recents));
            filterGames();
        }

        // --- 3. FILTERING ---

        function filterGames() {
            const query = searchBar.value.toUpperCase().replace(/[- ]/g, '');
            const mode = categoryFilter.value;
            let visibleCount = 0;
            let sectionCounts = {};

            // --- REORDERING LOGIC ---
            if (mode === 'recent') {
                glist.classList.add('showing-recent');
                // In recent mode, we only care about the games, not headers
                // Clear the list visually (doesn't delete data, just removes from screen)
                while (glist.firstChild) glist.removeChild(glist.firstChild);
                
                // Add wrappers back in "Recent" order
                recents.forEach(recentTitle => {
                    const w = wrappers.find(wrap => wrap.dataset.gameTitle === recentTitle);
                    if(w) glist.appendChild(w);
                });
            } else {
                glist.classList.remove('showing-recent');
                // RESTORE ORIGINAL ORDER (Headers + Games mixed correctly)
                // We re-append everything in the order we saved at the start
                originalOrder.forEach(node => glist.appendChild(node));
            }

            // --- VISIBILITY LOGIC ---
            wrappers.forEach(w => {
                const t = w.dataset.gameTitle;
                const type = w.dataset.gameType;
                const cleanT = t.toUpperCase().replace(/[- ]/g, '');
                
                let matchesSearch = cleanT.includes(query);
                let matchesMode = true;

                if (mode === 'favorites') matchesMode = favorites.includes(t);
                if (mode === 'recent') matchesMode = recents.includes(t);

                if (matchesSearch && matchesMode) {
                    w.style.display = 'flex';
                    visibleCount++;
                    if (mode !== 'recent') {
                        // Only count sections if we are NOT in recent mode
                        sectionCounts[type] = (sectionCounts[type] || 0) + 1;
                    }
                } else {
                    w.style.display = 'none';
                }
            });

            // --- HEADER VISIBILITY ---
            document.querySelectorAll('.section-header').forEach(h => {
                // If in recent mode, hide all headers immediately
                if (mode === 'recent') {
                    h.style.display = 'none';
                    return;
                }

                const type = h.dataset.sectionName.split(' ')[0].toLowerCase();
                // If searching or in favorites, only show header if it has visible games
                if (sectionCounts[type] > 0) {
                    h.style.display = 'block';
                    h.textContent = `${h.dataset.sectionName} (${sectionCounts[type]})`;
                } else {
                    h.style.display = 'none';
                }
            });

            // --- STATUS MESSAGE ---
            statusMsg.style.display = 'none';
            statusMsg.className = '';
            statusMsg.onclick = null;

            if (visibleCount === 0) {
                statusMsg.style.display = 'block';
                if (mode === 'favorites') {
                    statusMsg.textContent = "No favorites yet. Click the heart to add some!";
                } else if (mode === 'recent') {
                    statusMsg.textContent = "No recent games played.";
                } else {
                    statusMsg.textContent = "No results found. Click here for More Games!";
                    statusMsg.classList.add('is-link');
                    statusMsg.onclick = () => window.location.href = '/games/extra-games/';
                }
            }
        }

        searchBar.addEventListener('keyup', filterGames);
        categoryFilter.addEventListener('change', filterGames);
        filterGames();
    });
</script>
</body>
</html>
